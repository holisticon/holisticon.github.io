<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Workshop: JavaScript für Java- und C#-Entwickler</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" media="all" href="bower_components/reveal.js/css/reveal.min.css">

    <link rel="stylesheet" media="all" href="css/theme.css" id="theme">
    <link rel="shortcut icon" href="assets/brand/favicon.png">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="bower_components/reveal.js/lib/css/zenburn.css" id="highlight-theme">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <!--<script>
        document.write( '<link rel="stylesheet" href="bower_components/reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>-->

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

            <section>
                <h2>Workshop: JavaScript für Java- und <i>C#</i>-Entwickler</h2>
                <p>
                    <a href="mailto:oliver.zeigermann@gmail.com">Oliver Zeigermann</a> | <a href="http://zeigermann.eu">http://zeigermann.eu</a>
                </p>
                <p>
                    <a href="mailto:Martin.Reinhardt@holisticon.de">Martin Reinhardt</a> | <a href="http://www.holisticon.de">http://www.holisticon.de</a>
                </p>
                <p>
                    <a href="mailto:oliver.ochs@holisticon.de">Oliver Ochs</a> | <a href="http://www.holisticon.de">http://www.holisticon.de</a>
                </p>
            </section>

                <section>
                    <h2>Inhalte</h2>
                    <ul>
                        <li class="fragment">Basiswissen
                        <li class="fragment">Funktionen
                        <li class="fragment">Objekte und Klassen
                        <li class="fragment">Module
                        <li class="fragment">Optional: Unit-Tests
                        <li class="fragment"><strike>Optional: jQuery</strike>
                        <li class="fragment">Optional: Die Zukunft von JavaScript
                    </ul>
                </section>

                                <section>
                    <section>
                        <h1>Hello World</h1>
                    </section>
                    <section>
                        <h2>Hello World #1</h2>
                        <pre><code class="xml" contenteditable>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;script&gt;
      alert("Hello World");
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
                    </code></pre>
                    <a href="code/helloworld.html" target="_blank">Run</a>
					
					<aside class="notes">
						<ul><li>1995 	Mocha 		Netscape Navigator<br>
							<li>LiveScript 	Netscape Navigator
							<li>1996	JavaScript 1.0 	Sun|Netscape Alliance
							<li>JScript 		Internet Explorer 3.0
							<li>ECMAScript	ECMA
						</ul>
						
					</aside>
                    </section>
                    <section>
                        <h2>Hello World #2</h2>
                        <pre><code class="xml" contenteditable>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;/head&gt;
    &lt;body&gt;
      &lt;div id="log">&lt;/div>
      &lt;script&gt;
          var element = document.getElementById("log");
          element.innerHTML = "&lt;h1>Hello World&lt;/h1>";
      &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
                        </code></pre>
                        <a href="code/helloworld2.html" target="_blank">Run</a>
						<aside class="notes">
							<ul>
							<li>Scheme im Web-Browser
							<li>HTML scripting language
							<li>make it look like Java
							<li>made it look like C and AWK
							<li>Mistakes (some recapitulating LISP) were frozen early
							</ul>							
						</aside>

                    </section>
                    <section>
                        <h2>Hello World #3</h2>
                        <pre><code class="javascript" contenteditable>
node -e "console.log('Hello World');"
                        </code></pre>
						<aside class="notes">NodeJS - serverseitiges JavaScript, ES5/ES6 weil man Umgebung unter Kontrolle hat</aside>
                    </section>
                    <section>
                        <h2>Hello World #4</h2>
                        <img src="assets/Devtools-Screenshot.png">
						<aside class="notes">Entwicklung direkt im Webbrowser, z.B. mit den Chrome Dev Tools</aside>		
                    </section>
                    <section>
                        <h2>Hello World #5</h2>
                        <img src="assets/JS_Bin.png" width="800px">
                        <br>
                        <a href="http://jsbin.com/gibeziguji/edit?js,console" target="_blank">JS Bin Öffnen</a>
						<aside class="notes">JS-Bin zum Ausprobieren und Teilen von Code, Übungen können in JS-Bin gemacht werden, darf jetzt schon geöffnet werden.</aside>
                    </section>

                </section>

                <section>
                    <h2>Object</h2>
                        <pre><code class="javascript" contenteditable>var map = {
    feld1: 'Huhu',
    zweites$Feld: "Auch sowas geht!"
};
console.log(typeof map === "object"); // true
console.log(map.feld1); // Huhu
console.log(map["zweites$Feld"]); // Auch sowas geht!

map.hund = "Ganz neu geht auch";
</code></pre>
					    <aside class="notes">
							<pre>
	Copy/paste snippets of code into HTML 
		Tolerate “minor” errors (e.g., missing semicolons) 
	Simpliﬁed event handling
		onclick, onmouseover
		inspired by HyperCard
	Pick a few hard-working, powerful primitives 
		First class functions for procedural abstraction 	(AWK more than Scheme) 
		Objects everywhere, prototype-based 	(Self, but only one parent per object) 
	Leave all else out! 
	
	Self: The Power of Simplicity
	1980er Jahre: Xerox PARC & Sun Microsystems
	Ziel: mehr Freiheit als bei OO-Sprachen wie Smalltalk
	Wenige Konstrukte:
	Slots
	Traits
	Prototypen
	keine Typen und Klassen
	Keine Unterscheidung zwischen 
		dem Verhalten eines Objekts (Methoden einer Klasse) 
		dem Zustand des Objekts (Eigenschaften einer Klasse)
	Ein Objekt besteht aus Slots.
		Slots haben Namen.
		Slots können Methoden oder Attribute aufnehmen.
	
							</pre>
					    </aside>
                </section>
                <section>
                    <h2>Typen</h2>
                        <pre><code class="javascript" contenteditable>var string = "String";
typeof string === "string";

var int = 1;
typeof int === "number";

var float = 1.0;
typeof float === "number";

var bool = true;
typeof bool === "boolean";

var func = function() {};
typeof func === "function";

typeof michGibtEsNicht === "undefined";</code></pre>
<aside class="notes">
	<pre>
		Basistypen sind 
		Zahlen (number)
		Strings (string)
		Boolean (boolean)
		undefined 
		Diese sind unveränderlich.
		null ist ein Objekt.
		
		„You might consider undefined to represent system-level, unexpected, 
		or error-like absense of value and null to represent program-level, 
		normal, or expected absence of value.“
		-- David Flanagan – „JavaScript: The Definitive Guide“
		
		Literale
			lassen sich direkt verwenden
			sind unveränderlich
			haben Methoden
			nutzen Autoboxing
		
		JS ist keine statisch typisierte Sprache
		Keine Cast-Operator, stattdessen implizite Typkonvertierung
		
		Dynamische Sprache und Gleichheit
		

		5 + "5" === "55";  // true
		5 == "5"; // true
		5 !== "5"; // true
		3..toString();    // "3"
		
		
		
	</pre>
</aside>
                </section>

                <section>
                    <h2>Array</h2>
                        <pre><code class="javascript" contenteditable>
var array = ["a", "b", "c"];
var el = array[2];
array[1] = 20;
typeof array === "object";
// fügt die 4 am Ende hinzu
array.push(4);
                        </code></pre>
                </section>

                <section>
                <section>
                    <h2>Kontrollstrukturen</h2>
                </section>
                <section>
                    <h2>for</h2>
                        <pre><code class="javascript" contenteditable>
for (var i=0; i &lt; array.length; i++) {
    console.log(i + ": " + array[i]);
}

// Durch alle Feld-Namen iterieren
// Geht für Map / Object und für Array!
for (var i in map) {
    console.log(i + ": " + map[i]);
}
                        </code></pre>
						<aside class="notes">
							Index statt Objekt, <br>
							Wenn die Eigenschaften in der Schleife hinzugefügt wurden, dann kann man sich nicht darauf verlassen, dass diese Eigenschaften in der Iteration berücksichtigt werden. Daher sollte das Objekt in der Schleife nicht verändert werden
							
							
						</aside>
                </section>

                <section>
                    <h2>Kontrollstrukturen ansonsten wie in Java / C#</h2>
                    <ul>
                        <li>if / else
                        <li>while / do
                        <li>switch
                        <li>break / continue
                        <li><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements">Referenz</a></li>
                    </ul>
                </section>
            </section>
                <section>
                <section>
                    <h2>Funktionen</h2>
                        <pre><code class="javascript" contenteditable>
function f2() {
    console.log("Called!");
}
var result2 = f2();
result2 === undefined;

var f1 = function(p1, p2) {
    return p1 + p2;
};
var result1 = f1(1,2);
result1 === 3;
                        </code></pre>
						<aside class="notes">
							<ul>
								<li>Funktionsliteral
								<li>Return undefined || value
								<li>Parameter	
							</ul>
						</aside>
                </section>
                <section>
                    <h2>Optionale Parameter</h2>
                        <pre><code class="javascript" contenteditable>function f1(p1) {
    if (typeof p1 === 'undefined') {
        return null;
    } else {
        return p1;
    }
}

var result1 = f1(1);
console.log(result1 === 1);

var result2 = f1();
console.log(result2 === null);</code></pre>
<aside class="notes">
	<ul>
		<li>Funktionen lassen sich nicht anhand der Parameter überladen.
		<li>Nicht übergebene Parameter sind „undefined“.
	</ul>
</aside>
                </section>

                    <section>
                        <h2>Varargs</h2>
                    <pre><code class="javascript" contenteditable>function summe() {
    var sum = 0;
    for (var a in arguments) {
        sum += arguments[a];
    }
    return sum;
}

var result5 = summe(1,2,3);
console.log(result5 === 6);</code></pre>
<aside class="notes">
	<ul>
		<li>Zuviel übergebene Parameter stehen im Bonusparameter „arguments“ zur Verfügung
		<li>Das Array arguments ist kein echtes Array. Es hat zwar ein length-Attribut und man kann über dieses iterieren, allerdings fehlen ihm die Methoden eines echten Array-Objekts.

	</ul>
</aside>
                    </section>
            </section>

                <section>
                    <section>
                    <h1>Scopes</h1>
                    </section>
                    <section>
                        <h2>So nicht!</h2>
    <pre><code class="javascript" contenteditable>
{
    var huch = "Ich bin noch da";
}

console.log(huch); // Ich bin noch da
    </code></pre>
<aside class="notes">
	JavaScript nutzt den Function Scope
</aside>
                    </section>
                    <section>
                        <h2>So!</h2>
    <pre><code class="javascript" contenteditable>
(function () {
    var achso = "Ich bin weg";
}());

console.log(achso); // ReferenceError
    </code></pre>
                <p><a target="_blank" href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">Immediately-Invoked Function Expression (IIFE)</a></p>

<aside class="notes">
	Hoisting -> Variables are created when the execution scope is entered.<br />
	Fallstricke des Hoistings umgehen: Deklariere alle Variablen in einem Scope (z.B. in einer Function) in einer Zeile zum Beginn des Scopes.
	
</aside>
                    </section>
                </section>

                    <section>
                        <h2>Übung: Basiswissen</h2>
                        <ul>
                            <li>Erzeuge ein Array mit Personen-Objekten mit mindestens den Eigenschaften
                                <ul>
                                    <li>Name
                                    <li>Alter
                                    <li>Geschlecht
                                </ul>
                            </li>
                            <li>Gib alle Personen nacheinander aus
                                <ul>
                                    <li>Erstelle eine Funktion, die eine Person auf der Console ausgibt
                                </ul>
                            </li>

                        </ul>
                    </section>
                        <section>
                <section>
                    <h2>Objekte, die Zweite</h2>
                    <ul>
                        <li class="fragment">Objekte können auch Funktionen als Properties haben
                        <li class="fragment">Diese funktionieren dann wie Methoden, d.h. <code>this</code> ist an das Objekt gebunden über das sie aufgerufen werden
						</ul>
    <pre class="fragment"><code class="javascript" contenteditable>var obj = {
    field: 10,
    log: function() {
        console.log(this.field);
    }
};

obj.log(); // 10
    </code></pre>
	<aside class="notes">
		Methoden sind keine Eigenschaft der Sprache.
		Dies ist ein "Design Pattern": Method Invocation Pattern
		
	</aside>
                </section>
                <section>
                    <h2>Call / Apply</h2>
                    <ul>
                    <li class="fragment">call und apply sind Methoden auf Funktionen
                    <li class="fragment">Erlauben das freie Binden an einen anderen Kontext
                    </ul>

<pre class="fragment"><code class="javascript" contenteditable>var field = "Reingelegt";
obj.log.call(this);
// => ???
</code></pre>
				<aside class="notes">
					Bild malen
				<pre>
					plus.call({x : "Hello"}, 1, 1);​ 
					plus.apply({x: 40}, [1, 1]);
				</pre>
				</aside>
                </section>
            </section>
            <section>
                <section>
                    <h2>Klassen mit JavaScript</h2>
                    <ul>
                        <li class="fragment">Klassen und Konstruktoren sind Mechanismen, um mehrere, strukturell gleiche oder ähnliche Objekte zu erzeugen
                        <li class="fragment">Auch in JavaScript können eigene Klassen definiert werden
                        <li class="fragment">Einfachvererbung ist ebenso möglich
                        <li class="fragment">Der Mechanismus ist nicht direkt in die Sprache eingebaut
                        <li class="fragment">Stattdessen benutzen wir Best-Practice-Patterns
                        <li class="fragment">Grundlage ist die prototypische Vererbung
                    </ul>
					<aside class="notes">
						<ul>
							<li>Self - leichter als Smalltalk
							<li>Prototypen
							<li>Neues Objekt auf Basis einer Kopiervorlage....
						</ul>
						
					</aside>
                </section>
                <section>
                <h2>Prototypen</h2>
                <ul>
                    <li class="fragment">Jedes Objekt hat zusätzlich eine Referenz auf seinen Prototyp
                        <ul>
                            <li><code>Object.getPrototypeOf()</code> in neueren Browsern</li>
                        </ul>
                    </li>
                    <li class="fragment"><code>Object</code> hat keinen Prototypen, ist aber Prototyp aller anderen Objekte
                    <li class="fragment">Lesende Property-Zugriffe können transitiv an Prototypen delegiert werden
                    <li class="fragment">Dies heißt prototypische Vererbung
                </ul>
            </section>
            <section>
                <h2>Setzen des Prototypen aka das Typen-System</h2>
                <p >Der Prototyp kann nicht direkt, aber durch Aufruf von <code>new</code> gesetzt werden
                </p>
    <pre class="fragment"><code class="javascript" contenteditable>/** @constructor */
function Person(name) {
    this.name = name;
}</code></pre>
    <pre class="fragment"><code class="javascript" contenteditable>// Methode
Person.prototype.getName = function() {
    return this.name;
};</code></pre>
    <pre ><code class="javascript" contenteditable>
var olli = new Person('Olli');
olli.getName() === 'Olli';
    </code></pre>
	
	<aside class="notes">
		<ul>
			<b>Ablauf eines Konstruktoraufrufs</b>
			<li>ein leeres, neues Objekt wird erzeugt
			<li>die Konstruktor-Funktion hat ein Property prototype, dies wird als Prototyp des neuen Objekts verwendet
			<li>this wird an dieses neue Objekte gebunden
			<li>die Konstruktor-Funktion wird aufgerufen (mit this gebunden)
			<li>das neue Objekt wird implizit zurückgegeben (wenn die Funktion kein explizites return hat)
			<ul>
			<li>Wird die new-Anweisung vergessen, dann wird die Funktion nicht als Konstruktor-Funktion aufgerufen. 
			<li>Es steht dann kein neues Objekt als this-Objekt zur Verfügung. 
			<li>Das this-Objekt ist dann beispielsweise das globale Objekt. 
			<li>Das heißt, der Funktion wird die übergebenen Parameter dem globalen Objekt zuweisen.
			</ul>
			<li>Protoype-Chain aufmalen
		</ul>
	</aside>
            </section>

            <section>
                <h4>Ablauf eines Konstruktoraufrufs mit <code>new</code></h4>
                <ul>
                    <li class="fragment">ein leeres, neues Objekt wird erzeugt
                    <li class="fragment">die Konstruktor-Funktion hat ein Property <code>prototype</code>, dies wird als Prototyp des neuen Objekts verwendet
                    <li class="fragment"><code>this</code> wird an dieses neue Objekte gebunden, d.h. man kann darauf über <code>this</code> zugreifen
                    <li class="fragment">die Konstruktor-Funktion wird aufgerufen (mit <code>this</code> gebunden)
                    <li class="fragment">das neue Objekt wird implizit zurückgegeben (wenn die Funktion kein explizites <code>return</code> hat)
                </ul>
            </section>

            <section>
                <h2>"Typsystem"</h2>
                <p>Ein Objekt ist <code>instanceof</code> aller seiner Prototypen
                </p>
    <pre><code class="javascript" contenteditable>var olli = new Person('Olli');
Object.getPrototypeOf(olli) === Person.prototype;
olli instanceof Object;
olli instanceof Person;
    </code></pre>
            </section>
        </section>
        <section>
            <h2>Warnung</h2>
            <h3 class="fragment">Douglas Crockford findet Klassen und <em>this</em> doof</h3>
            <h3 class="fragment">Douglas Crockford hatte vor einigen Jahren großen Einfluss auf die Entwicklung von JavaScript</h3>
            <h3 class="fragment">Douglas Crockford schrieb das Buch "JavaScript the good parts"</h3>
            <h3 class="fragment">Die Zukunft von JavaScript gibt ihm allerdings nicht Recht (später mehr)</h3>
        </section>
                    <section>
                        <h2>Übung: Klassen</h2>
                        <ul>
                            <li>Schreibe eine Klasse für Person
                                <ul>
                                    <li>Lasse im Konstruktor die drei bekannten Parameter für <code>name</code>,
                                        <code>alter</code> und <code>geschlecht</code> zu
                                    <li>Mache aus allen Funktionen, die auf Personen arbeiten, Methoden
                                </ul>
                            </li>
                            <li>Erzeuge ein Objekt vom Typ Person und rufe Methoden darauf auf
                        </ul>
                    </section>
                <section>
                    <section>
                        <h3>Vererbung</h3>
                        <ul>
                            <li class="fragment">Klassen-Hierarchien und Instanzen nutzen beide Prototypische Vererbung
                            <li class="fragment">Klassen-Hierarchien werden einmal aufgebaut und als Prototypen der Instanzen verwendet
                            <li class="fragment">Klassen-Hierarchien werden ebenso über Prototypen erstellt
                            <li class="fragment">Object.create erzeugt ein neues Object mit einem anderen Objekt als Prototypen
                            <li class="fragment">Aufruf von Super-Konstruktoren und Super-Methoden über call / apply
                        </ul>
                    </section>
                    <section>
                        <h3>Vererbung #1</h3>
    <pre><code class="javascript" contenteditable>function Person(name, gender) {
    this.name = name;
    this.gender = gender;
}
Person.prototype.getName = function() {
    return this.name;
};

function Male(name) {
    Person.call(this, name, "Male"); // super call
}
Male.prototype = Object.create(Person.prototype);</code></pre>
                    </section>
                    <section>
                        <h3>Vererbung #2</h3>
    <pre><code class="javascript" contenteditable>Male.prototype.getName = function() {
    // super call
    return "Mr " + Person.prototype.getName.call(this);
};

var martina = new Person('Martina');
var olli = new Male('Olli');
olli.getName() === 'Mr Olli';
olli.gender === 'Male';
olli instanceof Male;
olli instanceof Person;
olli instanceof Object;</code></pre>
                    <aside class="notes">Weiterhing aufmalen</aside>
				</section>
        <section>
            <h2>Underscore</h2>
            <ul>
                <li class="fragment"><em>_.extend</em> eine von vielen Hilfsfunktionen der Bibliothek <em>Underscore</em>
                <li class="fragment"><a target="_blank" href="http://underscorejs.org/">http://underscorejs.org/</a>
                <li class="fragment">Versucht Unzulänglichkeiten der Sprache als Bibliothek auszugleichen
                <li class="fragment">Ein Klassiker unter den JavaScript-Bibliotheken
                <li class="fragment">wird typischerweise als <em>_</em> importiert (daher der Name)
                <li class="fragment"><a target="_blank" href="https://lodash.com/">https://lodash.com/</a> ist die moderne Variante
                <li class="fragment">Neues JavaScript-Versionen enthalten bereits eine ganze Reihe der Funktionen dieser Bibliotheken
            </ul>
        </section>
		        <section>
		            <h3>Beispiel</h3>
		                <pre><code class="javascript" contenteditable>function Programmer(name, language) {
    Person.call(this, name);
    this.language = language;
}
_.extend(Programmer.prototype, Person.prototype);
// instead of
// Programmer.prototype = Object.create(Person.prototype);

Programmer.prototype.code = function() {
    return this.getName() + " codes in " + this.language;
};
var programmer = new Programmer('Erna', 'JavaScript');
console.log(programmer.getName()); // Erna
console.log(programmer.code()); // Erna codes in JavaScript
console.log(programmer instanceof Programmer); // true
// true for Object.create, false for _.extend
console.log(programmer instanceof Person);</code></pre> 
		        <aside class="notes">http://jsbin.com/foyivi/edit?js,console</aside>
				</section>
                </section>


                <section>
                  <section>
                <h2>Vererbungshierarchien - revisited</h2>
                <ul>
                    <li class="fragment">Das verwirrendste Thema in JavaScript
                    <li class="fragment">Viele Bibliotheken nehmen sich dieses Themas an
                    <li class="fragment">Alternative zu Klassen-Hierarchien sind Mixins
                    <li class="fragment">Bei Mixins werden alle Properties eines Prototypen in einen anderen hineinkopiert
                </ul>
				<aside class="notes">
					Ein Trait ist ein Begriff aus der objektorientierten Programmierung und beschreibt eine wiederverwendbare Sammlung von Methoden und Attributen, ähnlich einer Klasse. Die Idee der Traits entspringt der Programmiersprache Self und findet mittlerweile in vielen modernen objektorientierten Sprachen Verwendung.<br />

					Die Verwendung von Traits erlaubt das horizontale Wiederverwenden einer Methodensammlung. JS untestützt nicht direkt Traits, sondern erlaubt Mixins.
				</aside>
            </section>
	        <section>
	            <h3>Mixins</h3>
	                <pre><code class="javascript" contenteditable>function mixin() {
    child = {};
    for (var arg = 0; arg < arguments.length; arg ++) {
        for (var prop in arguments[arg]) {
             if (arguments[arg].hasOwnProperty(prop)) {
                child[prop] = arguments[arg][prop];
             }
        }
    }
    return child;
}
</code></pre>
	        <aside class="notes">Bei Mixins werden alle Properties eines Prototypen in einen anderen hineinkopiert, aufmalen</aside>
		</section>
		<section>
			            <h3>Mixins</h3>
			                <pre><code class="javascript" contenteditable>var wolpertinger = mixin(
    {fly : function() {console.log("fly");}},
    {swim: function() {console.log("swim");}},
    {bark: function() {console.log("bark");}}
)

wolpertinger.bark(); // bark

		</code></pre>
			        <aside class="notes">http://jsbin.com/joroqo/edit?js,console</aside>
		</section>
		<section>
					            <h3>jQuery.extend</h3>
					                <pre><code class="javascript" contenteditable>// http://api.jquery.com/jQuery.extend/
// Merge the contents of two or more objects together 
// into the first object
var wolpertinger = $.extend({}, duck, dog);


				</code></pre>
					        <aside class="notes">http://jsbin.com/joroqo/edit?js,console</aside>
		</section>
      
                </section>
                    <section>
                        <h3>Übung: Vererbung</h3>
                        <ul>
                            <li>Schreibe die Klasse Customer
                                <ul>
                                    <li>Customer soll von Person erben
                                    <li>Berechne im Konstruktor aus den Parametern zumindest ein zusätzliches Feld, das
                                        den vermuteten bevorzugten Kaufgegenstand angibt
                                    <li>Rufe aus dem Customer-Konstruktor den Person-Konstruktor auf
                                    <li>Überschreibe die Methode <code>getName</code>
                                    <li>Füge die Methode <code>shop</code> hinzu, die den bevorzugten Gegenstand ausgibt
                                </ul>
                            </li>
                            <li>Erzeuge mindestens ein Objekt vom Typ Customer und rufe Methoden darauf auf
                        </ul>
                    </section>
                <section>
                    <section>
                        <h2>Module</h2>
                        <p class="fragment">Module in JavaScript werden über <code>Closures</code> realisiert</p>
                    </section>
                    <section>
                        <h2>Closure in einem Satz</h2>
                        <p>Eine innere Funktion hat immer Zugriff auf alle Variablen und Parameter ihrer äußeren Funktion, <em>auch wenn diese äußere Funktion bereits beendet ist</em>.</p>
                        <p><small>Frei nach <em>Douglas Crockford</em></small></p>
                    </section>

                <section>
                    <h3>Beispiel Closure</h3>
                        <pre><code class="javascript" contenteditable>function outer() {
    var used = "Olli";
    var unused = "weg";
    return (function() {
        return "Text: " + used;
    });
}

var inner = outer();
console.log(inner());</code></pre>
<aside class="notes">Aufmalen</aside>
                </section>
                    <section>
                        <h2>Closure Definition</h2>
                        <p class="fragment">Eine Closure ist eine spezielle Art von Objekt, welche zwei Dinge kombiniert</p>
                        <ul>
                            <li class="fragment">Eine Funktion</li>
                            <li class="fragment">die Umgebung in welcher diese Funktion erzeugt wurde
                                - diese Umgebung besteht aus allen lokalen Variablen und Parametern, die sichtbar waren als die Closure erzeugt wurde</li>
                        </ul>
                        <p class="fragment"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures">Aus der Definition auf MDN</a></p>
                    </section>
                    <section>
                        <h3>Revealing Module Pattern</h3>
<pre><code class="javascript" contenteditable>var humanresources = (function () {
    function InternalStuff() {
    }

    function Person(name) {
        this.name = name;
        // uses internal stuff
    }

    return {
        Person: Person
    };
})();
</code></pre>
                    </section>
                    <section>
                    <h3>Sichtbarkeit bei Revealing Module Pattern</h3>
<pre><code class="javascript" contenteditable>var olli = new humanresources.Person('Olli');
olli.name === 'Olli';
// TypeError: undefined is not a function
new humanresources.InternalStuff();</code></pre>
                </section>

                    <section>
        <h3>Es gibt zwei grundsätzlich unterschiedliche Modul-Systeme als Defacto-Standard</h3>
        <ul>
            <li class="fragment">AMD
                <ul>
                    <li class="fragment">Module werden nicht blockierend und potentiell asynchron geladen
                    <li class="fragment">Module werden über bower oder manuell installiert
                    <li class="fragment">Verwendung auf Client-Seite
                    <li class="fragment">Default-Implementierung: RequireJS
                    <!--<li class="fragment">Für blockierendes Laden auf Server-Seite: r.js-->
                </ul>
            </li>
            <li class="fragment">CommonJS
                <ul>
                    <li class="fragment">Module werden blockierend und synchron geladen
                    <li class="fragment">Module werden über npm installiert
                    <li class="fragment">Verwendung auf Server-Seite
                    <!--<li class="fragment">Für nicht blockierendes Laden auf Client-Seite: Browserify-->
                </ul>
            </li>
            <li class="fragment">Beide Modul-Systeme können über r.js / Browserify auch auf Server / Client benutzt werden. Webpack kann sowohl CommonJs als auch AMD Module gleichzeitig verwenden.
        </ul>
    </section>
                    <section>
        <h3>CommonJS Module (Node)</h3>
		<h4>Definition</h4>
<pre class="fragment"><code class="javascript" contenteditable>// in der Datei "eater.js"
var eatThis = function (name) {
    console.log(name);
};
exports.eatThis = eatThis;</code></pre>
                        <h4>Einbinden</h4>
<pre class="fragment"><code class="javascript" contenteditable>var eaterModule = require("eater");

eaterModule.eatThis(name);
</code></pre>
                    </section>
                                    <section>
                        <h3>AMD Modul mit requireJS</h3>


                        <h4>Definition</h4>
<pre class="fragment"><code class="javascript" contenteditable>// Ein Modul pro Datei:
// js/modules/accounting.js
define(function () {
    return {
        getIdNumberForName: function(name) {
            // ...
        }
    };
});
</code></pre>
                        <h4>Einbinden</h4>
<pre class="fragment"><code class="javascript" contenteditable>
require(['js/modules/accounting'], function (Accounting) {
    var name = // ...
    var id = Accounting.getIdNumberForName(name);
    // ...
});
</code></pre>
                    </section>

                </section>
                <section>
                    <h2>Übung: Module</h2>
                    <ul>
                        <li>Schreibe ein Modul, in das du die vorhandenen Typendefinitionen verschiebst. Dieses Modul soll
                            <ul>
                                <li>nach außen nur die <code>Customer</code>-Klasse exportieren
                            </ul>
                        </li>
                        <li>Schreibe den aufrufenden Code so um, dass er mit den neuen Modulen arbeitet
						<li>Benutze das Revealing Module Pattern
                    </ul>
                </section>
            <section>
                <section>
					<h2>Testen mit Jasmine</h2>
				</section>

                <section>
                    <h3>Grundlagen Jasmine</h3>
                    <ul>
                        <li class="fragment">weit verbreitetes JavaScript Unit-Testframework
                        <li class="fragment">Stil BDD orientiert, etwas anders als JUnit
                        <li class="fragment">Ausführung im Browser
                        <li class="fragment"><code>describe</code>: eine komplette Test-Suite
                        <li class="fragment"><code>it</code>: ein einzelner Testfall
                        <li class="fragment"><code>expect</code>: erwartetes Ergebnis ausdrücken
                        <li class="fragment"><code>beforeEach / afterEach</code>: Vorbereitung / Aufräumarbeiten
                        <li class="fragment"><a href="http://jasmine.github.io/2.0/introduction.html" target="_blank">Hauptseite Jasmine</a></li>
                    </ul>
                </section>
                <section>
                    <h3>Test-Suite</h3>
                        <pre><code class="javascript stretch" contenteditable>describe("Calculator", function () {
    var data;
    beforeEach(function () {
        // calculateMortgage(price, down, interest, term)
        data = calculateMortgage(200000, 10, 7.5, 30); 
    });
    afterEach(function() {
    });

    it("principle", function () {
        expect(data.principle).toEqual(199990.00);
    });
    it("invalid", function () {
        expect(function () {
            calculateMortgage(1, 10, 7.5, 30);
        }).toThrowError("You do not need any money");
    });
});</code></pre>
                </section>

                    <section>
                        <h2>Beispiel-Test-Lauf</h2>
                        <a target="_blank" href="code/jasmine-example/SpecRunner.html">Tests laufen lassen</a>
                    </section>
                </section>
                <section>
                    <h2>Übung: Teste deine eigenen Klassen</h2>
                    <ul>
                        <li>Nutze dafür dieses JsBin-Projekt als Grundlage
                            <a target="_blank" href="http://jsbin.com/jijuri/2/edit?js,output">http://jsbin.com/jijuri/2/edit?js,output</a>
                        <li>Clone das Projekt und verschiebe deine Klassen in den JavaScript-Bereich
                        <li>Schreibe mit Jasmine sinnvolle Spezifikationen für deine Klassen
                        <li>Achtung: Aus technischen Gründen, läuft Jasmine hier in der älteren Version 1.3.1
                       
                    </ul>
					<aside class="notes"> <li>Wenn du nicht bei Null anfangen möchtest, kannst du auch dieses Projekt clonen
                            <a target="_blank" href="http://jsbin.com/hiyuxometi/3/edit?js,output">http://jsbin.com/hiyuxometi/3/edit?js,output</a></aside>
                </section>
				
    <section>
        <section>
            <h2>Die Zukunft von JavaScript</h2>
            <ul>
                <li class="fragment">JavaScript gewinnt immer mehr an Bedeutung
                <li class="fragment">Wer für den Browser entwickelt, kommt an JavaScript nicht vorbei
                <li class="fragment">JavaScript hat allerdings viele Klippen
                    <ul>
                        <li class="fragment">keine deklarierte Typen
                        <li class="fragment">Klassen und Vererbung umständlich
                        <li class="fragment">keine lexikalischen Scopes
                        <li class="fragment">Bindung von <em>this</em> kann verwirrend sein
                        <li class="fragment">Kein Einheitliches Modul-Konzept
                    </ul>
                </li>
                <li class="fragment">Die nächste Version von JavaScript wird diese Klippen entfernen (außer Typen)
                <li class="fragment">Es gibt Ansätze für deklarierte Typen in JavaScript
            </ul>
        </section>
        <section>
            <h3>JavaScript vs ECMAScript</h3>
            <ul>
                <li class="fragment">ECMAScript ist der Standard 
				<li class="fragment">JavaScript ist ein eingetragenes Warenzeichen von Oracle Corporation 
                <li class="fragment">ECMAScript wird oft als ES abgekürzt	
                <li class="fragment">Ab IE9 sind wir bei ES5 (2009)
                <li class="fragment">ES2015 ist der offizielle, neue Name für ES6
                <li class="fragment">Spec für ES6 (beinahe) final
                <li class="fragment">An der Spec für ES7 wird bereits gearbeitet
                <li class="fragment">Vieles bereits heute nutzbar
            </ul>
			<aside class="notes">JavaScript ist eine Implementierung von ECMAScript</aside>
        </section>
    <section>
        <h3>Ausblick auf ES2015</h3>
            <h4 class="fragment"><em>keine</em> statischen Typen</h4>

            <ul>
            <li class="fragment">Module
            <li class="fragment">Klassen
            <li class="fragment">let, const
            <li class="fragment">Fat arrow <b>=></b> für besseres Binding von <b>this</b>
            <li class="fragment">vararg, optional
            <li class="fragment">Collection Types (Map, Set, WeakMap, WeakSet)
        </ul>
    </section>
        <section>
            <h3>Gesprengte Ketten #1: Lexikalisches Scoping</h3>
            <pre><code class="javascript stretch" contenteditable>(function(){
  'use strict';
  {
    let a = 10;
    // or
    const b = 10;
    a = 20;
    // when a is const:
    // => TypeError: Assignment to constant variable.
  }

  console.log(a); // => ReferenceError: a is not defined
})();
</code></pre>
        </section>
        <section>
            <h3>Gesprengte Ketten #2: Klassen</h3>
                <pre><code class="javascript stretch" contenteditable>(function(){
  'use strict';
  class Person {
    constructor(name) {
        this.name = name;
    }
    getName() {
        return this.name;
    }
  }
  class Programmer extends Person {
    constructor(name, language) {
        super(name);
        this.language = language;
    }
    code() {
        return this.getName() + " codes in " + this.language;
    }
  }
  const programmer = new Programmer('Erna', 'JavaScript');
  console.log(programmer.code());
  console.log(programmer instanceof Programmer); // true
  console.log(programmer instanceof Person); // true
})();</code></pre>
        </section>
		        <section>
		            <h3>Gesprengte Ketten #3: Fat Arrow</h3>
		                <pre><code class="javascript" contenteditable>var result = values.sort(function(a, b) {
    return a - b;
});

(function(){
	'use strict';
	 let arr = ['a', 'e', 'i', 'o', 'u'];
	 arr.sort( (a, b)=> a < b? 1: -1 );
	 console.log(arr);
})();
		</code></pre>		
		<aside class="notes">
                Binden von this für Callbacks etc. mit <em>=></em>, 
				<pre>
		The fat arrow is a feature of ES6 (now officially called ECMAScript 2015). 
		It's been introduced in Firefox but not yet in other browsers (and especially
	 	not completely in V8 which would be interesting for nodejs/iojs development).
			</pre>
		</aside>
		</section>
        <section>
            <h3>Weitere gesprengte Klippen</h3>
            <ul>
                <li class="fragment">Module (mit import)
                <li class="fragment">Unicode support
                <li class="fragment">Reflection API
            </ul>
        </section>

        <section>
            <h3>Wo läuft ES 2015 schon jetzt?</h3>
            <ul>
                <li class="fragment">Chrome
                <li class="fragment">Firefox
                <li class="fragment"><em>node --harmony --use-strict</em>
                <li class="fragment">io.js
                <a target="_blank" href="https://iojs.org/en/es6.html">https://iojs.org/en/es6.html</a>
                <li class="fragment">Transpiler
                    <ul>
                        <li class="fragment"><a target="_blank" href="https://babeljs.io/">https://babeljs.io/</a>, ehemals 6to5, wird von JsBin unterstützt
                        <li class="fragment"><a target="_blank" href="https://github.com/google/traceur-compiler">https://github.com/google/traceur-compiler</a>
                        <li class="fragment"><a target="_blank" href="http://www.typescriptlang.org/">http://www.typescriptlang.org/</a> (plus statische Typen)
                        <li class="fragment">Liste weiterer Transpiler <a target="_blank" href="https://github.com/addyosmani/es6-tools">https://github.com/addyosmani/es6-tools</a>
                    </ul>
                </li>
                <li class="fragment">Wie viel läuft?: <a target="_blank" href="http://kangax.github.io/es5-compat-table/es6">http://kangax.github.io/es5-compat-table/es6</a></li>
            </ul>
        </section>
    </section>

                <section>
                    <h2>Übung: ES 2015 Klassen</h2>
                    <ul>
                        <li>Schreibe deine Klassen auf die neue Klassensyntax von ES 2015 um
						<li>Babel-Übersetzer in JsBin:
                            <a target="_blank" href="http://jsbin.com/xopore/edit?js,console">http://jsbin.com/xopore/edit?js,console</a>
							
					</ul>
					<aside class="notes">
                        <li>Babel-Übersetzer in JsBin:
                            <a target="_blank" href="http://jsbin.com/jobaci/1/edit?js,console">http://jsbin.com/jobaci/1/edit?js,console</a>

                    </aside>
                </section>


            </div>

		</div>

<script src="bower_components/reveal.js/lib/js/head.min.js"></script>
<script src="bower_components/reveal.js/js/reveal.min.js"></script>
<script>
    // Configure Reveal
    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Vertical centering of slides
        center: true,

        // Enable the slide overview mode
        overview: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,


        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 960,
        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.5,
        maxScale: 2.0,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme

        // Transition speed
        transitionSpeed: 'default', // default/fast/slow

        transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'bower_components/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'bower_components/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'bower_components/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'bower_components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'bower_components/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
            { src: 'bower_components/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
            //{ src: 'bower_components/reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
            //{ src: 'bower_components/reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }

        ]
    });
</script>

</body>

</html>
